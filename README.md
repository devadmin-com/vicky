# Vicky
Vicky is a robot which sends JIRA activity to relevant slack 
intelligently mapping JIRA task projects, lables and assignee to slack channels 
and people.

# Building, Installing, Running
## Requirements
* Java 8 or higher
* gradle 4.10.2 or higher

## How to open the project in IDEA
  - clone the project
  - open it with IntelliJ Idea as gradle project
  - Enable auto-import for gradle
  - Enable annotation processing for IDEA

## Configure and launch application
You need to configure *application.yml* (see example in *sample-application.yml*) and connect Vicky with JIRA and Slack 
for correct work.

## Connecting to Slack
* Create a New app in slack https://api.slack.com/apps?new_app=1
* Add next permissions in  OAuth & Permissions -> Scopes -> Bot Token Scopes
    * *chat:write*
    * *users:read*
    * *users:read.email*
* Install App to workspace. OAuth & Permissions -> OAuth Tokens & Redirect URLs -> Install App to Workspace
* slack.token.bot property should have value from OAuth & Permissions -> Tokens for Your Workspace -> Bot User OAuth Access Token
* slack.token.verification property should have value from Basic Information -> Verification Token
* Invite Vicky to channels you want to see her in

## Connecting to JIRA
* Go to *https://<yourdomain.atlassian.net>/plugins/servlet/webhooks#*
* Create new webhook with next settings:
    * URL: https://<path._to_your_slackbot>/event/jira
    * Issue related events - mark *created*, *updated*, *deleted*, for *Comment* and *Issue* sections.
* All users who supposed to get notifications should have "Anyone" visibility level for email here 
https://id.atlassian.com/manage-profile/profile-and-visibility                                           

### Hint: Running local machine for testing.
  - Use [Ngrok](https://ngrok.com) to test webhook integrations on your local machine if you do not have a static IP 
  with following command (*ngrok http <port>*)
  - Put *url* generated by *Ngrok* as webhook in jira settings

# Features
See [Feature Specification Document](https://docs.google.com/document/d/1ue_Lk8OrZuKWIhliexv4FjrXPWXoNo9Oohpaej8pdVo/edit)

# Enjoy ;)
